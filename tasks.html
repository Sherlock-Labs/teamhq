<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tasks — TeamHQ</title>
  <meta name="description" content="Track all work items across every project in one centralized view.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Geist:wght@400;500;600;700&family=Geist+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/tokens.css">
  <!-- AG Grid Community — CSS (structural + Quartz theme) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community@34/styles/ag-grid.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community@34/styles/ag-theme-quartz.css">
  <link rel="stylesheet" href="css/shared.css">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/spreadsheet.css">
  <link rel="stylesheet" href="css/tasks.css">
</head>
<body>

  <a href="#main-content" class="skip-link">Skip to content</a>

  <!-- Navigation -->
  <nav class="nav" aria-label="Main navigation">
    <div class="container nav__inner">
      <div class="nav__brand">
        <a href="index.html" class="nav__logo-link">
          <img src="img/sherlock-labs-logo.svg" alt="Sherlock Labs" class="nav__logo" width="180" height="36">
        </a>
      </div>
      <div class="nav__links">
        <a href="tools.html" class="nav__link">Tools</a>
        <a href="projects.html" class="nav__link">Projects</a>
        <a href="tasks.html" class="nav__link nav__link--active" aria-current="page">Tasks</a>
        <a href="meetings.html" class="nav__link">Meetings</a>
        <a href="interviews.html" class="nav__link">Interviews</a>
        <a href="docs.html" class="nav__link">Docs</a>
        <a href="spreadsheets.html" class="nav__link">Spreadsheets</a>
        <a href="team.html" class="nav__link">Team</a>
      </div>
    </div>
  </nav>

  <main class="tasks-page" id="main-content">
    <div class="container">
      <!-- Page Header -->
      <div class="tasks-header">
        <div class="tasks-header__title-row">
          <h1 class="tasks-header__title">Tasks</h1>
          <button class="tasks-header__new-btn" type="button" id="new-task-btn">+ New Task</button>
        </div>
        <p class="tasks-header__stats" id="tasks-stats" aria-live="polite"></p>
      </div>

      <!-- Filter Bar -->
      <div class="tasks-filter-bar" id="tasks-filter-bar" style="display:none;">
        <div class="tasks-filter-bar__filters">
          <div class="tasks-filter-bar__field">
            <select class="tasks-filter-bar__select" id="filter-project" aria-label="Filter by project">
              <option value="">All Projects</option>
            </select>
          </div>
          <div class="tasks-filter-bar__field">
            <select class="tasks-filter-bar__select" id="filter-status" aria-label="Filter by status">
              <option value="">All Statuses</option>
              <option value="planned">Planned</option>
              <option value="in-progress">In Progress</option>
              <option value="completed">Completed</option>
              <option value="deferred">Deferred</option>
            </select>
          </div>
          <div class="tasks-filter-bar__field">
            <select class="tasks-filter-bar__select" id="filter-priority" aria-label="Filter by priority">
              <option value="">All Priorities</option>
              <option value="high">High</option>
              <option value="medium">Medium</option>
              <option value="low">Low</option>
            </select>
          </div>
          <div class="tasks-filter-bar__field">
            <select class="tasks-filter-bar__select" id="filter-owner" aria-label="Filter by owner">
              <option value="">All Owners</option>
              <option value="__unassigned">Unassigned</option>
            </select>
          </div>
          <div class="tasks-filter-bar__field tasks-filter-bar__field--search">
            <input class="tasks-filter-bar__search" type="text" id="filter-search"
                   placeholder="Search tasks..." aria-label="Search tasks by title">
          </div>
        </div>
        <div class="tasks-filter-bar__actions">
          <span class="tasks-filter-bar__badge" id="filter-badge" hidden></span>
          <button class="tasks-filter-bar__clear" id="filter-clear" type="button" hidden>Clear</button>
        </div>
      </div>

      <!-- Loading State -->
      <div class="tasks-loading" id="tasks-loading">Loading tasks...</div>

      <!-- Empty State -->
      <div class="tasks-empty" id="tasks-empty" style="display:none;">
        <p class="tasks-empty__text">No tasks tracked yet.</p>
        <p class="tasks-empty__hint">Create work items on individual projects to see them here.</p>
      </div>

      <!-- Error State -->
      <div class="tasks-error" id="tasks-error" style="display:none;">
        <p>Failed to load tasks. <a href="#" id="tasks-retry">Retry</a></p>
      </div>

      <!-- AG Grid Container -->
      <div id="tasks-grid" class="ag-theme-quartz" style="display:none;"></div>
    </div>
  </main>

  <!-- Screen reader announcement for panel open -->
  <div class="sr-only" aria-live="polite" aria-atomic="true" id="panel-announcement"></div>

  <!-- Task Detail Panel Overlay (click-to-close target) -->
  <div class="task-detail-overlay" id="task-detail-overlay"></div>

  <!-- Task Detail Panel -->
  <aside class="task-detail" id="task-detail" aria-hidden="true" role="complementary" aria-label="Task details">
    <div class="task-detail__header">
      <span class="task-detail__id" id="panel-task-id"></span>
      <button class="task-detail__close" id="panel-close" type="button" aria-label="Close task details">&times;</button>
    </div>
    <div class="task-detail__body" id="panel-body">
      <!-- Title (editable heading/input toggle) -->
      <div class="task-detail__title-wrap">
        <span class="task-detail__title" id="panel-title-display" role="heading" aria-level="2" tabindex="0"></span>
        <input type="text" class="task-detail__title-input" id="panel-title-input"
               placeholder="Task title" autocomplete="off" aria-label="Task title" style="display:none;">
      </div>

      <!-- Description (always-visible textarea) -->
      <textarea class="task-detail__description" id="panel-description"
                placeholder="Add a description..." rows="4" aria-label="Task description"></textarea>

      <!-- Separator -->
      <hr class="task-detail__separator">

      <!-- Metadata -->
      <div class="task-detail__metadata">
        <div class="task-detail__field">
          <span class="task-detail__label">Status</span>
          <div class="task-detail__badge-select">
            <span class="thq-badge thq-badge--muted" id="panel-status-badge">Planned</span>
            <select class="task-detail__select-native" id="panel-status" aria-label="Status">
              <option value="planned">Planned</option>
              <option value="in-progress">In Progress</option>
              <option value="completed">Completed</option>
              <option value="deferred">Deferred</option>
            </select>
          </div>
        </div>
        <div class="task-detail__field">
          <span class="task-detail__label">Priority</span>
          <div class="task-detail__badge-select">
            <span class="thq-badge thq-badge--muted" id="panel-priority-badge">Medium</span>
            <select class="task-detail__select-native" id="panel-priority" aria-label="Priority">
              <option value="high">High</option>
              <option value="medium">Medium</option>
              <option value="low">Low</option>
            </select>
          </div>
        </div>
        <div class="task-detail__field">
          <span class="task-detail__label">Owner</span>
          <input type="text" class="task-detail__text-input" id="panel-owner"
                 placeholder="Assign owner..." autocomplete="off" aria-label="Owner">
        </div>
        <div class="task-detail__field">
          <span class="task-detail__label">Phase</span>
          <input type="text" class="task-detail__text-input" id="panel-phase"
                 placeholder="Set phase..." autocomplete="off" aria-label="Phase">
        </div>
        <div class="task-detail__field">
          <span class="task-detail__label">Project</span>
          <a class="task-detail__project-link" id="panel-project-link" href="#">—</a>
        </div>
        <div class="task-detail__field">
          <span class="task-detail__label">Created by</span>
          <span class="task-detail__readonly" id="panel-created-by">—</span>
        </div>
      </div>
    </div>
  </aside>

  <!-- New Task Modal -->
  <div class="modal-overlay" id="task-modal-overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-labelledby="task-modal-title" aria-modal="true">
      <div class="modal__header">
        <h3 class="modal__title" id="task-modal-title">New Task</h3>
        <button class="modal__close" type="button" aria-label="Close">&times;</button>
      </div>
      <form class="modal__form" id="task-form" novalidate>
        <div class="modal__field">
          <label class="modal__label" for="task-project">Project <span class="modal__required">*</span></label>
          <select class="modal__select" id="task-project" name="project" required>
            <option value="">Select a project...</option>
          </select>
          <p class="modal__error" aria-live="polite"></p>
        </div>
        <div class="modal__field">
          <label class="modal__label" for="task-title">Title <span class="modal__required">*</span></label>
          <input class="modal__input" type="text" id="task-title" name="title"
                 placeholder="e.g. Add user profile page" required autocomplete="off">
          <p class="modal__error" aria-live="polite"></p>
        </div>
        <div class="modal__field">
          <label class="modal__label" for="task-description">Description</label>
          <textarea class="modal__textarea modal__textarea--brief" id="task-description" name="description"
                    placeholder="Add details, context, or notes..." rows="3"></textarea>
        </div>
        <div class="modal__field">
          <label class="modal__label" for="task-status">Status</label>
          <select class="modal__select" id="task-status" name="status">
            <option value="planned" selected>Planned</option>
            <option value="in-progress">In Progress</option>
            <option value="completed">Completed</option>
            <option value="deferred">Deferred</option>
          </select>
        </div>
        <div class="modal__field">
          <label class="modal__label" for="task-priority">Priority</label>
          <select class="modal__select" id="task-priority" name="priority">
            <option value="high">High</option>
            <option value="medium" selected>Medium</option>
            <option value="low">Low</option>
          </select>
        </div>
        <div class="modal__field">
          <label class="modal__label" for="task-owner">Owner</label>
          <input class="modal__input" type="text" id="task-owner" name="owner"
                 placeholder="e.g. Alice" autocomplete="off">
        </div>
        <div class="modal__field">
          <label class="modal__label" for="task-phase">Phase</label>
          <input class="modal__input" type="text" id="task-phase" name="phase"
                 placeholder="e.g. v1.0" autocomplete="off">
        </div>
        <div class="modal__actions">
          <button class="modal__cancel" type="button">Cancel</button>
          <button class="modal__submit" type="submit">Create Task</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <img src="img/sherlock-labs-logo.svg" alt="Sherlock Labs" class="footer__logo" width="140" height="28">
      <p class="footer__attribution">Built with Claude Code</p>
    </div>
  </footer>

  <!-- AG Grid Community — JS (UMD bundle) -->
  <script src="https://cdn.jsdelivr.net/npm/ag-grid-community@34/dist/ag-grid-community.min.js"></script>
  <script src="js/tasks.js"></script>
</body>
</html>
